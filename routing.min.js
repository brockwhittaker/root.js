var Router=function(){var a={E:{PATH:0,VARIABLE:1,ALL:2},parse:function(b){var c=b.replace(/^\/|\/$/,"");return c=c.split(/\//).map(function(b){var c;return c=/^:/.test(b)?a.E.VARIABLE:/^\*/.test(b)?a.E.ALL:a.E.PATH,{type:c,component:b}})},compare:function(b,c){for(var d={},e=Math.max(c.length,b.length),f=0;f<e;f++)if(!b[f]||b[f].type!==a.E.PATH||!c[f]||c[f].component!==b[f].component){if(!b[f]||b[f].type!==a.E.VARIABLE||!c[f]){if(b[f]&&b[f].type===a.E.ALL&&c[f]){if(f<b.length-1)continue;d.__ALL=c.slice(f).map(function(a){return a.component}).join("/");break}return!1}d[b[f].component.replace(/^:/,"")]=c[f].component}return d},run_middleware:function(a,b,c){var d=0,e=function(){d===b.length?c():(d++,b[d-1](a,e))};e()}},b=function(){this.routes=[],this.middleware=[],window.addEventListener("hashchange",function(b){for(var c=b.newURL.split(/#/).pop(),d=a.parse(c),e=0;e<this.routes.length;e++){var f=a.compare(this.routes[e].route,d);if(f)return b.params=f,b.hash=c,b.params.__ALL&&(b.endHash=b.params.__ALL,delete b.params.__ALL),a.run_middleware(b,this.middleware,function(){this.routes[e].callback.call(this,b)}.bind(this)),!0}return!1}.bind(this))};return b.prototype={parse:a.parse,add:function(b,c){this.routes.push({route:a.parse(b),callback:c})},use:function(a){this.middleware.push(a)}},b}();
